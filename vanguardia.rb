# Curso web scraping básico

$fecha={}

$fecha[1]="06/12/1991"
$fecha[2]="12/12/1991"
$fecha[3]="16/12/1991"
$fecha[4]="03/01/1992"
$fecha[5]="23/01/1992"
$fecha[6]="17/04/1993"
$fecha[7]="22/04/1993"
$fecha[8]="26/04/1993"
$fecha[9]="21/01/1995"
$fecha[10]="22/01/1995"
$fecha[11]="25/01/1995"
$fecha[12]="02/02/1995"
$fecha[13]="05/02/1995"
$fecha[14]="07/02/1995"
$fecha[15]="10/02/1995"
$fecha[16]="11/02/1995"
$fecha[17]="16/02/1995"
$fecha[18]="21/02/1995"
$fecha[19]="23/02/1995"
$fecha[20]="26/02/1995"
$fecha[21]="26/10/1996"
$fecha[22]="27/10/1996"
$fecha[23]="28/10/1996"
$fecha[24]="29/10/1996"
$fecha[25]="31/10/1996"
$fecha[26]="01/11/1996"
$fecha[27]="02/11/1996"
$fecha[28]="03/11/1996"
$fecha[29]="04/11/1996"
$fecha[30]="05/11/1996"
$fecha[31]="09/11/1996"
$fecha[32]="11/11/1996"
$fecha[33]="17/11/1996"
$fecha[34]="19/11/1996"
$fecha[35]="20/11/1996"
$fecha[36]="21/11/1996"
$fecha[37]="23/11/1996"
$fecha[38]="01/12/1996"
$fecha[39]="15/09/1998"
$fecha[40]="27/09/1998"
$fecha[41]="28/09/1998"
$fecha[42]="30/09/1998"
$fecha[43]="01/10/1998"
$fecha[44]="02/10/1998"
$fecha[45]="04/10/1998"
$fecha[46]="06/10/1998"
$fecha[47]="07/10/1998"
$fecha[48]="09/10/1998"
$fecha[49]="10/10/1998"
$fecha[50]="13/10/1998"
$fecha[51]="21/10/1998"
$fecha[52]="28/09/1999"
$fecha[53]="04/10/1999"
$fecha[54]="07/10/1999"
$fecha[55]="13/10/1999"
$fecha[56]="15/10/1999"
$fecha[57]="23/10/1999"
$fecha[58]="03/11/1999"
$fecha[59]="05/11/1999"
$fecha[60]="04/02/2001"
$fecha[61]="10/02/2001"
$fecha[62]="11/02/2001"
$fecha[63]="13/02/2001"
$fecha[64]="14/02/2001"
$fecha[65]="15/02/2001"
$fecha[66]="16/02/2001"
$fecha[67]="18/02/2001"
$fecha[68]="21/02/2001"
$fecha[69]="26/02/2001"
$fecha[70]="06/03/2001"
$fecha[71]="07/03/2001"
$fecha[72]="08/03/2001"
$fecha[73]="09/03/2001"
$fecha[74]="10/03/2001"
$fecha[75]="12/03/2001"
$fecha[76]="14/03/2001"
$fecha[77]="16/03/2001"
$fecha[78]="17/03/2001"
$fecha[79]="18/03/2001"
$fecha[80]="23/03/2001"
$fecha[81]="09/02/2002"
$fecha[82]="12/02/2002"
$fecha[83]="13/02/2002"
$fecha[84]="18/02/2002"
$fecha[85]="21/02/2002"
$fecha[86]="28/02/2002"
$fecha[87]="01/03/2002"
$fecha[88]="02/03/2002"
$fecha[89]="03/03/2002"
$fecha[90]="05/03/2002"
$fecha[91]="11/03/2002"
$fecha[92]="05/04/2002"
$fecha[93]="08/04/2002"
$fecha[94]="02/11/2005"
$fecha[95]="03/11/2005"
$fecha[96]="04/11/2005"
$fecha[97]="05/11/2005"
$fecha[98]="06/11/2005"
$fecha[99]="08/11/2005"
$fecha[100]="16/11/2005"
$fecha[101]="17/11/2005"
$fecha[102]="18/11/2005"
$fecha[103]="19/11/2005"
$fecha[104]="24/11/2005"
$fecha[105]="27/11/2005"
$fecha[106]="05/12/2005"
$fecha[107]="07/12/2005"
$fecha[108]="08/12/2005"
$fecha[109]="10/12/2005"
$fecha[110]="13/12/2005"
$fecha[111]="14/12/2005"
$fecha[112]="15/12/2005"
$fecha[113]="16/12/2005"
$fecha[114]="17/12/2005"
$fecha[115]="18/12/2005"
$fecha[116]="19/12/2005"
$fecha[117]="20/12/2005"
$fecha[118]="21/12/2005"
$fecha[119]="22/12/2005"
$fecha[120]="23/12/2005"
$fecha[121]="27/12/2005"
$fecha[122]="28/12/2005"
$fecha[123]="29/12/2005"
$fecha[124]="30/12/2005"
$fecha[125]="31/12/2005"
$fecha[126]="22/04/2006"
$fecha[127]="05/05/2006"
$fecha[128]="07/05/2006"
$fecha[129]="09/05/2006"
$fecha[130]="11/05/2006"
$fecha[131]="12/05/2006"
$fecha[132]="17/05/2006"
$fecha[133]="20/05/2006"
$fecha[134]="01/12/2006"
$fecha[135]="02/12/2006"
$fecha[136]="03/12/2006"
$fecha[137]="04/12/2006"
$fecha[138]="11/12/2006"
$fecha[139]="17/12/2006"
$fecha[140]="18/12/2006"
$fecha[141]="20/12/2006"
$fecha[142]="21/12/2006"
$fecha[143]="29/12/2006"
$fecha[144]="30/12/2006"
$fecha[145]="28/03/2009"
$fecha[146]="10/04/2009"
$fecha[147]="12/04/2009"
$fecha[148]="14/04/2009"
$fecha[149]="15/04/2009"
$fecha[150]="18/04/2009"
$fecha[151]="19/04/2009"
$fecha[152]="21/04/2009"
$fecha[153]="22/04/2009"
$fecha[154]="23/04/2009"
$fecha[155]="24/04/2009"
$fecha[156]="27/04/2009"
$fecha[157]="19/09/2010"
$fecha[158]="20/09/2010"
$fecha[159]="21/09/2010"
$fecha[160]="24/09/2010"
$fecha[161]="28/09/2010"
$fecha[162]="07/10/2010"
$fecha[163]="10/10/2010"
$fecha[164]="26/10/2010"
$fecha[165]="28/10/2010"
$fecha[166]="30/10/2010"
$fecha[167]="14/11/2010"
$fecha[168]="15/11/2010"
$fecha[169]="26/11/2010"
$fecha[170]="13/12/2010"
$fecha[171]="16/12/2010"
$fecha[172]="23/12/2010"
$fecha[173]="26/12/2010"
$fecha[174]="01/01/2011"
$fecha[175]="06/01/2011"
$fecha[176]="09/01/2011"
$fecha[177]="12/01/2011"
$fecha[178]="16/01/2011"
$fecha[179]="18/01/2011"
$fecha[180]="19/01/2011"
$fecha[181]="20/01/2011"
$fecha[182]="27/01/2011"
$fecha[183]="31/05/1988"
$fecha[184]="08/06/1988"
$fecha[185]="05/09/1991"
$fecha[186]="06/09/1991"
$fecha[187]="11/09/1991"
$fecha[188]="14/09/1991"
$fecha[189]="17/09/1991"
$fecha[190]="18/09/1991"
$fecha[191]="21/09/1991"
$fecha[192]="26/09/1991"
$fecha[193]="27/09/1991"
$fecha[194]="28/09/1991"
$fecha[195]="06/10/1991"

for i in 1..195
    
    fecha = Date.parse $fecha[i]

    dia=fecha.day.to_s()
    puts dia
    if dia.length==1 then
       dia= "0"+ dia
    end
    puts dia 

    mes=fecha.month.to_s()
    puts mes    
    if mes.length==1 then
       mes= "0"+ mes
    end     
    puts mes

    agno=fecha.year.to_s()
    puts agno
    
    for t in 1..20

    url="http://hemeroteca.lavanguardia.com/edition.html?bd="+ dia +"&bm="+ mes +"&by="+ agno +"&x=35&y=9&page="+ t.to_s()
    puts url
    html = ScraperWiki.scrape(url)
    puts html
    
    
    puts "*****************Sacamos la primera columna de la tabla del html que nos interesa**********************************"
    
    j=1
    
    require 'nokogiri'
    doc = Nokogiri::HTML(html, nil, 'utf-8')
    doc.search('ul[@class="eva"]> li').each do |row|
      puts row.css('a').attr('href')
      puts row.css('a').text
      url_pag=row.css('a').attr('href')
      record = {}        
      record['URL']= url_pag
      record['i']= i
      record['Fecha'] = $fecha[i]
      record['Pagina'] = row.css('a').text
      ScraperWiki.save_sqlite(["URL"], record)
      j=j+1
    end
 end
end




# Curso web scraping básico

$fecha={}

$fecha[1]="06/12/1991"
$fecha[2]="12/12/1991"
$fecha[3]="16/12/1991"
$fecha[4]="03/01/1992"
$fecha[5]="23/01/1992"
$fecha[6]="17/04/1993"
$fecha[7]="22/04/1993"
$fecha[8]="26/04/1993"
$fecha[9]="21/01/1995"
$fecha[10]="22/01/1995"
$fecha[11]="25/01/1995"
$fecha[12]="02/02/1995"
$fecha[13]="05/02/1995"
$fecha[14]="07/02/1995"
$fecha[15]="10/02/1995"
$fecha[16]="11/02/1995"
$fecha[17]="16/02/1995"
$fecha[18]="21/02/1995"
$fecha[19]="23/02/1995"
$fecha[20]="26/02/1995"
$fecha[21]="26/10/1996"
$fecha[22]="27/10/1996"
$fecha[23]="28/10/1996"
$fecha[24]="29/10/1996"
$fecha[25]="31/10/1996"
$fecha[26]="01/11/1996"
$fecha[27]="02/11/1996"
$fecha[28]="03/11/1996"
$fecha[29]="04/11/1996"
$fecha[30]="05/11/1996"
$fecha[31]="09/11/1996"
$fecha[32]="11/11/1996"
$fecha[33]="17/11/1996"
$fecha[34]="19/11/1996"
$fecha[35]="20/11/1996"
$fecha[36]="21/11/1996"
$fecha[37]="23/11/1996"
$fecha[38]="01/12/1996"
$fecha[39]="15/09/1998"
$fecha[40]="27/09/1998"
$fecha[41]="28/09/1998"
$fecha[42]="30/09/1998"
$fecha[43]="01/10/1998"
$fecha[44]="02/10/1998"
$fecha[45]="04/10/1998"
$fecha[46]="06/10/1998"
$fecha[47]="07/10/1998"
$fecha[48]="09/10/1998"
$fecha[49]="10/10/1998"
$fecha[50]="13/10/1998"
$fecha[51]="21/10/1998"
$fecha[52]="28/09/1999"
$fecha[53]="04/10/1999"
$fecha[54]="07/10/1999"
$fecha[55]="13/10/1999"
$fecha[56]="15/10/1999"
$fecha[57]="23/10/1999"
$fecha[58]="03/11/1999"
$fecha[59]="05/11/1999"
$fecha[60]="04/02/2001"
$fecha[61]="10/02/2001"
$fecha[62]="11/02/2001"
$fecha[63]="13/02/2001"
$fecha[64]="14/02/2001"
$fecha[65]="15/02/2001"
$fecha[66]="16/02/2001"
$fecha[67]="18/02/2001"
$fecha[68]="21/02/2001"
$fecha[69]="26/02/2001"
$fecha[70]="06/03/2001"
$fecha[71]="07/03/2001"
$fecha[72]="08/03/2001"
$fecha[73]="09/03/2001"
$fecha[74]="10/03/2001"
$fecha[75]="12/03/2001"
$fecha[76]="14/03/2001"
$fecha[77]="16/03/2001"
$fecha[78]="17/03/2001"
$fecha[79]="18/03/2001"
$fecha[80]="23/03/2001"
$fecha[81]="09/02/2002"
$fecha[82]="12/02/2002"
$fecha[83]="13/02/2002"
$fecha[84]="18/02/2002"
$fecha[85]="21/02/2002"
$fecha[86]="28/02/2002"
$fecha[87]="01/03/2002"
$fecha[88]="02/03/2002"
$fecha[89]="03/03/2002"
$fecha[90]="05/03/2002"
$fecha[91]="11/03/2002"
$fecha[92]="05/04/2002"
$fecha[93]="08/04/2002"
$fecha[94]="02/11/2005"
$fecha[95]="03/11/2005"
$fecha[96]="04/11/2005"
$fecha[97]="05/11/2005"
$fecha[98]="06/11/2005"
$fecha[99]="08/11/2005"
$fecha[100]="16/11/2005"
$fecha[101]="17/11/2005"
$fecha[102]="18/11/2005"
$fecha[103]="19/11/2005"
$fecha[104]="24/11/2005"
$fecha[105]="27/11/2005"
$fecha[106]="05/12/2005"
$fecha[107]="07/12/2005"
$fecha[108]="08/12/2005"
$fecha[109]="10/12/2005"
$fecha[110]="13/12/2005"
$fecha[111]="14/12/2005"
$fecha[112]="15/12/2005"
$fecha[113]="16/12/2005"
$fecha[114]="17/12/2005"
$fecha[115]="18/12/2005"
$fecha[116]="19/12/2005"
$fecha[117]="20/12/2005"
$fecha[118]="21/12/2005"
$fecha[119]="22/12/2005"
$fecha[120]="23/12/2005"
$fecha[121]="27/12/2005"
$fecha[122]="28/12/2005"
$fecha[123]="29/12/2005"
$fecha[124]="30/12/2005"
$fecha[125]="31/12/2005"
$fecha[126]="22/04/2006"
$fecha[127]="05/05/2006"
$fecha[128]="07/05/2006"
$fecha[129]="09/05/2006"
$fecha[130]="11/05/2006"
$fecha[131]="12/05/2006"
$fecha[132]="17/05/2006"
$fecha[133]="20/05/2006"
$fecha[134]="01/12/2006"
$fecha[135]="02/12/2006"
$fecha[136]="03/12/2006"
$fecha[137]="04/12/2006"
$fecha[138]="11/12/2006"
$fecha[139]="17/12/2006"
$fecha[140]="18/12/2006"
$fecha[141]="20/12/2006"
$fecha[142]="21/12/2006"
$fecha[143]="29/12/2006"
$fecha[144]="30/12/2006"
$fecha[145]="28/03/2009"
$fecha[146]="10/04/2009"
$fecha[147]="12/04/2009"
$fecha[148]="14/04/2009"
$fecha[149]="15/04/2009"
$fecha[150]="18/04/2009"
$fecha[151]="19/04/2009"
$fecha[152]="21/04/2009"
$fecha[153]="22/04/2009"
$fecha[154]="23/04/2009"
$fecha[155]="24/04/2009"
$fecha[156]="27/04/2009"
$fecha[157]="19/09/2010"
$fecha[158]="20/09/2010"
$fecha[159]="21/09/2010"
$fecha[160]="24/09/2010"
$fecha[161]="28/09/2010"
$fecha[162]="07/10/2010"
$fecha[163]="10/10/2010"
$fecha[164]="26/10/2010"
$fecha[165]="28/10/2010"
$fecha[166]="30/10/2010"
$fecha[167]="14/11/2010"
$fecha[168]="15/11/2010"
$fecha[169]="26/11/2010"
$fecha[170]="13/12/2010"
$fecha[171]="16/12/2010"
$fecha[172]="23/12/2010"
$fecha[173]="26/12/2010"
$fecha[174]="01/01/2011"
$fecha[175]="06/01/2011"
$fecha[176]="09/01/2011"
$fecha[177]="12/01/2011"
$fecha[178]="16/01/2011"
$fecha[179]="18/01/2011"
$fecha[180]="19/01/2011"
$fecha[181]="20/01/2011"
$fecha[182]="27/01/2011"
$fecha[183]="31/05/1988"
$fecha[184]="08/06/1988"
$fecha[185]="05/09/1991"
$fecha[186]="06/09/1991"
$fecha[187]="11/09/1991"
$fecha[188]="14/09/1991"
$fecha[189]="17/09/1991"
$fecha[190]="18/09/1991"
$fecha[191]="21/09/1991"
$fecha[192]="26/09/1991"
$fecha[193]="27/09/1991"
$fecha[194]="28/09/1991"
$fecha[195]="06/10/1991"

for i in 1..195
    
    fecha = Date.parse $fecha[i]

    dia=fecha.day.to_s()
    puts dia
    if dia.length==1 then
       dia= "0"+ dia
    end
    puts dia 

    mes=fecha.month.to_s()
    puts mes    
    if mes.length==1 then
       mes= "0"+ mes
    end     
    puts mes

    agno=fecha.year.to_s()
    puts agno
    
    for t in 1..20

    url="http://hemeroteca.lavanguardia.com/edition.html?bd="+ dia +"&bm="+ mes +"&by="+ agno +"&x=35&y=9&page="+ t.to_s()
    puts url
    html = ScraperWiki.scrape(url)
    puts html
    
    
    puts "*****************Sacamos la primera columna de la tabla del html que nos interesa**********************************"
    
    j=1
    
    require 'nokogiri'
    doc = Nokogiri::HTML(html, nil, 'utf-8')
    doc.search('ul[@class="eva"]> li').each do |row|
      puts row.css('a').attr('href')
      puts row.css('a').text
      url_pag=row.css('a').attr('href')
      record = {}        
      record['URL']= url_pag
      record['i']= i
      record['Fecha'] = $fecha[i]
      record['Pagina'] = row.css('a').text
      ScraperWiki.save_sqlite(["URL"], record)
      j=j+1
    end
 end
end




# Curso web scraping básico

$fecha={}

$fecha[1]="06/12/1991"
$fecha[2]="12/12/1991"
$fecha[3]="16/12/1991"
$fecha[4]="03/01/1992"
$fecha[5]="23/01/1992"
$fecha[6]="17/04/1993"
$fecha[7]="22/04/1993"
$fecha[8]="26/04/1993"
$fecha[9]="21/01/1995"
$fecha[10]="22/01/1995"
$fecha[11]="25/01/1995"
$fecha[12]="02/02/1995"
$fecha[13]="05/02/1995"
$fecha[14]="07/02/1995"
$fecha[15]="10/02/1995"
$fecha[16]="11/02/1995"
$fecha[17]="16/02/1995"
$fecha[18]="21/02/1995"
$fecha[19]="23/02/1995"
$fecha[20]="26/02/1995"
$fecha[21]="26/10/1996"
$fecha[22]="27/10/1996"
$fecha[23]="28/10/1996"
$fecha[24]="29/10/1996"
$fecha[25]="31/10/1996"
$fecha[26]="01/11/1996"
$fecha[27]="02/11/1996"
$fecha[28]="03/11/1996"
$fecha[29]="04/11/1996"
$fecha[30]="05/11/1996"
$fecha[31]="09/11/1996"
$fecha[32]="11/11/1996"
$fecha[33]="17/11/1996"
$fecha[34]="19/11/1996"
$fecha[35]="20/11/1996"
$fecha[36]="21/11/1996"
$fecha[37]="23/11/1996"
$fecha[38]="01/12/1996"
$fecha[39]="15/09/1998"
$fecha[40]="27/09/1998"
$fecha[41]="28/09/1998"
$fecha[42]="30/09/1998"
$fecha[43]="01/10/1998"
$fecha[44]="02/10/1998"
$fecha[45]="04/10/1998"
$fecha[46]="06/10/1998"
$fecha[47]="07/10/1998"
$fecha[48]="09/10/1998"
$fecha[49]="10/10/1998"
$fecha[50]="13/10/1998"
$fecha[51]="21/10/1998"
$fecha[52]="28/09/1999"
$fecha[53]="04/10/1999"
$fecha[54]="07/10/1999"
$fecha[55]="13/10/1999"
$fecha[56]="15/10/1999"
$fecha[57]="23/10/1999"
$fecha[58]="03/11/1999"
$fecha[59]="05/11/1999"
$fecha[60]="04/02/2001"
$fecha[61]="10/02/2001"
$fecha[62]="11/02/2001"
$fecha[63]="13/02/2001"
$fecha[64]="14/02/2001"
$fecha[65]="15/02/2001"
$fecha[66]="16/02/2001"
$fecha[67]="18/02/2001"
$fecha[68]="21/02/2001"
$fecha[69]="26/02/2001"
$fecha[70]="06/03/2001"
$fecha[71]="07/03/2001"
$fecha[72]="08/03/2001"
$fecha[73]="09/03/2001"
$fecha[74]="10/03/2001"
$fecha[75]="12/03/2001"
$fecha[76]="14/03/2001"
$fecha[77]="16/03/2001"
$fecha[78]="17/03/2001"
$fecha[79]="18/03/2001"
$fecha[80]="23/03/2001"
$fecha[81]="09/02/2002"
$fecha[82]="12/02/2002"
$fecha[83]="13/02/2002"
$fecha[84]="18/02/2002"
$fecha[85]="21/02/2002"
$fecha[86]="28/02/2002"
$fecha[87]="01/03/2002"
$fecha[88]="02/03/2002"
$fecha[89]="03/03/2002"
$fecha[90]="05/03/2002"
$fecha[91]="11/03/2002"
$fecha[92]="05/04/2002"
$fecha[93]="08/04/2002"
$fecha[94]="02/11/2005"
$fecha[95]="03/11/2005"
$fecha[96]="04/11/2005"
$fecha[97]="05/11/2005"
$fecha[98]="06/11/2005"
$fecha[99]="08/11/2005"
$fecha[100]="16/11/2005"
$fecha[101]="17/11/2005"
$fecha[102]="18/11/2005"
$fecha[103]="19/11/2005"
$fecha[104]="24/11/2005"
$fecha[105]="27/11/2005"
$fecha[106]="05/12/2005"
$fecha[107]="07/12/2005"
$fecha[108]="08/12/2005"
$fecha[109]="10/12/2005"
$fecha[110]="13/12/2005"
$fecha[111]="14/12/2005"
$fecha[112]="15/12/2005"
$fecha[113]="16/12/2005"
$fecha[114]="17/12/2005"
$fecha[115]="18/12/2005"
$fecha[116]="19/12/2005"
$fecha[117]="20/12/2005"
$fecha[118]="21/12/2005"
$fecha[119]="22/12/2005"
$fecha[120]="23/12/2005"
$fecha[121]="27/12/2005"
$fecha[122]="28/12/2005"
$fecha[123]="29/12/2005"
$fecha[124]="30/12/2005"
$fecha[125]="31/12/2005"
$fecha[126]="22/04/2006"
$fecha[127]="05/05/2006"
$fecha[128]="07/05/2006"
$fecha[129]="09/05/2006"
$fecha[130]="11/05/2006"
$fecha[131]="12/05/2006"
$fecha[132]="17/05/2006"
$fecha[133]="20/05/2006"
$fecha[134]="01/12/2006"
$fecha[135]="02/12/2006"
$fecha[136]="03/12/2006"
$fecha[137]="04/12/2006"
$fecha[138]="11/12/2006"
$fecha[139]="17/12/2006"
$fecha[140]="18/12/2006"
$fecha[141]="20/12/2006"
$fecha[142]="21/12/2006"
$fecha[143]="29/12/2006"
$fecha[144]="30/12/2006"
$fecha[145]="28/03/2009"
$fecha[146]="10/04/2009"
$fecha[147]="12/04/2009"
$fecha[148]="14/04/2009"
$fecha[149]="15/04/2009"
$fecha[150]="18/04/2009"
$fecha[151]="19/04/2009"
$fecha[152]="21/04/2009"
$fecha[153]="22/04/2009"
$fecha[154]="23/04/2009"
$fecha[155]="24/04/2009"
$fecha[156]="27/04/2009"
$fecha[157]="19/09/2010"
$fecha[158]="20/09/2010"
$fecha[159]="21/09/2010"
$fecha[160]="24/09/2010"
$fecha[161]="28/09/2010"
$fecha[162]="07/10/2010"
$fecha[163]="10/10/2010"
$fecha[164]="26/10/2010"
$fecha[165]="28/10/2010"
$fecha[166]="30/10/2010"
$fecha[167]="14/11/2010"
$fecha[168]="15/11/2010"
$fecha[169]="26/11/2010"
$fecha[170]="13/12/2010"
$fecha[171]="16/12/2010"
$fecha[172]="23/12/2010"
$fecha[173]="26/12/2010"
$fecha[174]="01/01/2011"
$fecha[175]="06/01/2011"
$fecha[176]="09/01/2011"
$fecha[177]="12/01/2011"
$fecha[178]="16/01/2011"
$fecha[179]="18/01/2011"
$fecha[180]="19/01/2011"
$fecha[181]="20/01/2011"
$fecha[182]="27/01/2011"
$fecha[183]="31/05/1988"
$fecha[184]="08/06/1988"
$fecha[185]="05/09/1991"
$fecha[186]="06/09/1991"
$fecha[187]="11/09/1991"
$fecha[188]="14/09/1991"
$fecha[189]="17/09/1991"
$fecha[190]="18/09/1991"
$fecha[191]="21/09/1991"
$fecha[192]="26/09/1991"
$fecha[193]="27/09/1991"
$fecha[194]="28/09/1991"
$fecha[195]="06/10/1991"

for i in 1..195
    
    fecha = Date.parse $fecha[i]

    dia=fecha.day.to_s()
    puts dia
    if dia.length==1 then
       dia= "0"+ dia
    end
    puts dia 

    mes=fecha.month.to_s()
    puts mes    
    if mes.length==1 then
       mes= "0"+ mes
    end     
    puts mes

    agno=fecha.year.to_s()
    puts agno
    
    for t in 1..20

    url="http://hemeroteca.lavanguardia.com/edition.html?bd="+ dia +"&bm="+ mes +"&by="+ agno +"&x=35&y=9&page="+ t.to_s()
    puts url
    html = ScraperWiki.scrape(url)
    puts html
    
    
    puts "*****************Sacamos la primera columna de la tabla del html que nos interesa**********************************"
    
    j=1
    
    require 'nokogiri'
    doc = Nokogiri::HTML(html, nil, 'utf-8')
    doc.search('ul[@class="eva"]> li').each do |row|
      puts row.css('a').attr('href')
      puts row.css('a').text
      url_pag=row.css('a').attr('href')
      record = {}        
      record['URL']= url_pag
      record['i']= i
      record['Fecha'] = $fecha[i]
      record['Pagina'] = row.css('a').text
      ScraperWiki.save_sqlite(["URL"], record)
      j=j+1
    end
 end
end




# Curso web scraping básico

$fecha={}

$fecha[1]="06/12/1991"
$fecha[2]="12/12/1991"
$fecha[3]="16/12/1991"
$fecha[4]="03/01/1992"
$fecha[5]="23/01/1992"
$fecha[6]="17/04/1993"
$fecha[7]="22/04/1993"
$fecha[8]="26/04/1993"
$fecha[9]="21/01/1995"
$fecha[10]="22/01/1995"
$fecha[11]="25/01/1995"
$fecha[12]="02/02/1995"
$fecha[13]="05/02/1995"
$fecha[14]="07/02/1995"
$fecha[15]="10/02/1995"
$fecha[16]="11/02/1995"
$fecha[17]="16/02/1995"
$fecha[18]="21/02/1995"
$fecha[19]="23/02/1995"
$fecha[20]="26/02/1995"
$fecha[21]="26/10/1996"
$fecha[22]="27/10/1996"
$fecha[23]="28/10/1996"
$fecha[24]="29/10/1996"
$fecha[25]="31/10/1996"
$fecha[26]="01/11/1996"
$fecha[27]="02/11/1996"
$fecha[28]="03/11/1996"
$fecha[29]="04/11/1996"
$fecha[30]="05/11/1996"
$fecha[31]="09/11/1996"
$fecha[32]="11/11/1996"
$fecha[33]="17/11/1996"
$fecha[34]="19/11/1996"
$fecha[35]="20/11/1996"
$fecha[36]="21/11/1996"
$fecha[37]="23/11/1996"
$fecha[38]="01/12/1996"
$fecha[39]="15/09/1998"
$fecha[40]="27/09/1998"
$fecha[41]="28/09/1998"
$fecha[42]="30/09/1998"
$fecha[43]="01/10/1998"
$fecha[44]="02/10/1998"
$fecha[45]="04/10/1998"
$fecha[46]="06/10/1998"
$fecha[47]="07/10/1998"
$fecha[48]="09/10/1998"
$fecha[49]="10/10/1998"
$fecha[50]="13/10/1998"
$fecha[51]="21/10/1998"
$fecha[52]="28/09/1999"
$fecha[53]="04/10/1999"
$fecha[54]="07/10/1999"
$fecha[55]="13/10/1999"
$fecha[56]="15/10/1999"
$fecha[57]="23/10/1999"
$fecha[58]="03/11/1999"
$fecha[59]="05/11/1999"
$fecha[60]="04/02/2001"
$fecha[61]="10/02/2001"
$fecha[62]="11/02/2001"
$fecha[63]="13/02/2001"
$fecha[64]="14/02/2001"
$fecha[65]="15/02/2001"
$fecha[66]="16/02/2001"
$fecha[67]="18/02/2001"
$fecha[68]="21/02/2001"
$fecha[69]="26/02/2001"
$fecha[70]="06/03/2001"
$fecha[71]="07/03/2001"
$fecha[72]="08/03/2001"
$fecha[73]="09/03/2001"
$fecha[74]="10/03/2001"
$fecha[75]="12/03/2001"
$fecha[76]="14/03/2001"
$fecha[77]="16/03/2001"
$fecha[78]="17/03/2001"
$fecha[79]="18/03/2001"
$fecha[80]="23/03/2001"
$fecha[81]="09/02/2002"
$fecha[82]="12/02/2002"
$fecha[83]="13/02/2002"
$fecha[84]="18/02/2002"
$fecha[85]="21/02/2002"
$fecha[86]="28/02/2002"
$fecha[87]="01/03/2002"
$fecha[88]="02/03/2002"
$fecha[89]="03/03/2002"
$fecha[90]="05/03/2002"
$fecha[91]="11/03/2002"
$fecha[92]="05/04/2002"
$fecha[93]="08/04/2002"
$fecha[94]="02/11/2005"
$fecha[95]="03/11/2005"
$fecha[96]="04/11/2005"
$fecha[97]="05/11/2005"
$fecha[98]="06/11/2005"
$fecha[99]="08/11/2005"
$fecha[100]="16/11/2005"
$fecha[101]="17/11/2005"
$fecha[102]="18/11/2005"
$fecha[103]="19/11/2005"
$fecha[104]="24/11/2005"
$fecha[105]="27/11/2005"
$fecha[106]="05/12/2005"
$fecha[107]="07/12/2005"
$fecha[108]="08/12/2005"
$fecha[109]="10/12/2005"
$fecha[110]="13/12/2005"
$fecha[111]="14/12/2005"
$fecha[112]="15/12/2005"
$fecha[113]="16/12/2005"
$fecha[114]="17/12/2005"
$fecha[115]="18/12/2005"
$fecha[116]="19/12/2005"
$fecha[117]="20/12/2005"
$fecha[118]="21/12/2005"
$fecha[119]="22/12/2005"
$fecha[120]="23/12/2005"
$fecha[121]="27/12/2005"
$fecha[122]="28/12/2005"
$fecha[123]="29/12/2005"
$fecha[124]="30/12/2005"
$fecha[125]="31/12/2005"
$fecha[126]="22/04/2006"
$fecha[127]="05/05/2006"
$fecha[128]="07/05/2006"
$fecha[129]="09/05/2006"
$fecha[130]="11/05/2006"
$fecha[131]="12/05/2006"
$fecha[132]="17/05/2006"
$fecha[133]="20/05/2006"
$fecha[134]="01/12/2006"
$fecha[135]="02/12/2006"
$fecha[136]="03/12/2006"
$fecha[137]="04/12/2006"
$fecha[138]="11/12/2006"
$fecha[139]="17/12/2006"
$fecha[140]="18/12/2006"
$fecha[141]="20/12/2006"
$fecha[142]="21/12/2006"
$fecha[143]="29/12/2006"
$fecha[144]="30/12/2006"
$fecha[145]="28/03/2009"
$fecha[146]="10/04/2009"
$fecha[147]="12/04/2009"
$fecha[148]="14/04/2009"
$fecha[149]="15/04/2009"
$fecha[150]="18/04/2009"
$fecha[151]="19/04/2009"
$fecha[152]="21/04/2009"
$fecha[153]="22/04/2009"
$fecha[154]="23/04/2009"
$fecha[155]="24/04/2009"
$fecha[156]="27/04/2009"
$fecha[157]="19/09/2010"
$fecha[158]="20/09/2010"
$fecha[159]="21/09/2010"
$fecha[160]="24/09/2010"
$fecha[161]="28/09/2010"
$fecha[162]="07/10/2010"
$fecha[163]="10/10/2010"
$fecha[164]="26/10/2010"
$fecha[165]="28/10/2010"
$fecha[166]="30/10/2010"
$fecha[167]="14/11/2010"
$fecha[168]="15/11/2010"
$fecha[169]="26/11/2010"
$fecha[170]="13/12/2010"
$fecha[171]="16/12/2010"
$fecha[172]="23/12/2010"
$fecha[173]="26/12/2010"
$fecha[174]="01/01/2011"
$fecha[175]="06/01/2011"
$fecha[176]="09/01/2011"
$fecha[177]="12/01/2011"
$fecha[178]="16/01/2011"
$fecha[179]="18/01/2011"
$fecha[180]="19/01/2011"
$fecha[181]="20/01/2011"
$fecha[182]="27/01/2011"
$fecha[183]="31/05/1988"
$fecha[184]="08/06/1988"
$fecha[185]="05/09/1991"
$fecha[186]="06/09/1991"
$fecha[187]="11/09/1991"
$fecha[188]="14/09/1991"
$fecha[189]="17/09/1991"
$fecha[190]="18/09/1991"
$fecha[191]="21/09/1991"
$fecha[192]="26/09/1991"
$fecha[193]="27/09/1991"
$fecha[194]="28/09/1991"
$fecha[195]="06/10/1991"

for i in 1..195
    
    fecha = Date.parse $fecha[i]

    dia=fecha.day.to_s()
    puts dia
    if dia.length==1 then
       dia= "0"+ dia
    end
    puts dia 

    mes=fecha.month.to_s()
    puts mes    
    if mes.length==1 then
       mes= "0"+ mes
    end     
    puts mes

    agno=fecha.year.to_s()
    puts agno
    
    for t in 1..20

    url="http://hemeroteca.lavanguardia.com/edition.html?bd="+ dia +"&bm="+ mes +"&by="+ agno +"&x=35&y=9&page="+ t.to_s()
    puts url
    html = ScraperWiki.scrape(url)
    puts html
    
    
    puts "*****************Sacamos la primera columna de la tabla del html que nos interesa**********************************"
    
    j=1
    
    require 'nokogiri'
    doc = Nokogiri::HTML(html, nil, 'utf-8')
    doc.search('ul[@class="eva"]> li').each do |row|
      puts row.css('a').attr('href')
      puts row.css('a').text
      url_pag=row.css('a').attr('href')
      record = {}        
      record['URL']= url_pag
      record['i']= i
      record['Fecha'] = $fecha[i]
      record['Pagina'] = row.css('a').text
      ScraperWiki.save_sqlite(["URL"], record)
      j=j+1
    end
 end
end




